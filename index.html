<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fresheur.be - Recettes et Courses Intelligentes</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .fresh-gradient {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .recipe-card {
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .recipe-card.selected {
            border-color: #38ef7d;
            background-color: #f0fdf4;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Sample recipes database
        const RECIPES_DATABASE = [
            {
                id: 1,
                name: "Spaghetti Bolognaise",
                category: "P√¢tes",
                time: 30,
                difficulty: "Facile",
                price: 3.50,
                servings: 4,
                dietary: ["omnivore"],
                excludedIngredients: [],
                ingredients: [
                    { name: "Spaghetti", amount: "500g", price: 0.89, category: "√âpicerie", common: false },
                    { name: "Viande hach√©e", amount: "400g", price: 4.50, category: "Boucherie", common: false },
                    { name: "Tomates concass√©es", amount: "400g", price: 0.95, category: "√âpicerie", common: false },
                    { name: "Oignon", amount: "1", price: 0.25, category: "Fruits & L√©gumes", common: true },
                    { name: "Ail", amount: "2 gousses", price: 0.15, category: "Fruits & L√©gumes", common: true },
                    { name: "Huile d'olive", amount: "2 c.√†.s", price: 0.20, category: "√âpicerie", common: true },
                    { name: "Sel et poivre", amount: "Au go√ªt", price: 0.05, category: "√âpicerie", common: true }
                ],
                image: "üçù"
            },
            {
                id: 2,
                name: "Salade C√©sar au Poulet",
                category: "Salade",
                time: 20,
                difficulty: "Facile",
                price: 4.20,
                servings: 2,
                dietary: ["omnivore"],
                excludedIngredients: [],
                ingredients: [
                    { name: "Laitue romaine", amount: "1", price: 1.20, category: "Fruits & L√©gumes", common: false },
                    { name: "Poulet", amount: "200g", price: 2.80, category: "Boucherie", common: false },
                    { name: "Parmesan", amount: "50g", price: 1.50, category: "Cr√©merie", common: false },
                    { name: "Cro√ªtons", amount: "100g", price: 0.95, category: "√âpicerie", common: false },
                    { name: "Sauce C√©sar", amount: "100ml", price: 1.20, category: "√âpicerie", common: false },
                    { name: "Huile d'olive", amount: "1 c.√†.s", price: 0.10, category: "√âpicerie", common: true }
                ],
                image: "ü•ó"
            },
            {
                id: 3,
                name: "Curry de L√©gumes Vegan",
                category: "V√©g√©tarien",
                time: 35,
                difficulty: "Moyen",
                price: 3.80,
                servings: 4,
                dietary: ["vegetarien", "vegan"],
                excludedIngredients: ["viande", "poisson", "produits laitiers", "oeufs"],
                ingredients: [
                    { name: "Pois chiches", amount: "400g", price: 0.85, category: "√âpicerie", common: false },
                    { name: "Lait de coco", amount: "400ml", price: 1.45, category: "√âpicerie", common: false },
                    { name: "Curry en poudre", amount: "2 c.√†.s", price: 0.30, category: "√âpicerie", common: true },
                    { name: "Carottes", amount: "2", price: 0.40, category: "Fruits & L√©gumes", common: false },
                    { name: "Courgette", amount: "1", price: 0.80, category: "Fruits & L√©gumes", common: false },
                    { name: "Oignon", amount: "1", price: 0.25, category: "Fruits & L√©gumes", common: true },
                    { name: "Riz", amount: "300g", price: 0.60, category: "√âpicerie", common: false },
                    { name: "Ail", amount: "2 gousses", price: 0.15, category: "Fruits & L√©gumes", common: true }
                ],
                image: "üçõ"
            },
            {
                id: 4,
                name: "Omelette aux Champignons",
                category: "Oeufs",
                time: 15,
                difficulty: "Facile",
                price: 2.50,
                servings: 2,
                dietary: ["vegetarien"],
                excludedIngredients: ["viande", "poisson"],
                ingredients: [
                    { name: "Oeufs", amount: "4", price: 1.20, category: "Cr√©merie", common: false },
                    { name: "Champignons", amount: "200g", price: 1.50, category: "Fruits & L√©gumes", common: false },
                    { name: "Fromage r√¢p√©", amount: "50g", price: 0.80, category: "Cr√©merie", common: false },
                    { name: "Beurre", amount: "20g", price: 0.15, category: "Cr√©merie", common: true },
                    { name: "Sel et poivre", amount: "Au go√ªt", price: 0.05, category: "√âpicerie", common: true }
                ],
                image: "üç≥"
            },
            {
                id: 5,
                name: "Saumon Grill√© & L√©gumes",
                category: "Poisson",
                time: 25,
                difficulty: "Moyen",
                price: 7.50,
                servings: 2,
                dietary: ["omnivore", "pescetarien"],
                excludedIngredients: ["viande"],
                ingredients: [
                    { name: "Filet de saumon", amount: "300g", price: 6.50, category: "Poissonnerie", common: false },
                    { name: "Brocoli", amount: "200g", price: 1.20, category: "Fruits & L√©gumes", common: false },
                    { name: "Citron", amount: "1", price: 0.40, category: "Fruits & L√©gumes", common: false },
                    { name: "Huile d'olive", amount: "2 c.√†.s", price: 0.20, category: "√âpicerie", common: true },
                    { name: "Sel et poivre", amount: "Au go√ªt", price: 0.05, category: "√âpicerie", common: true },
                    { name: "Ail", amount: "1 gousse", price: 0.08, category: "Fruits & L√©gumes", common: true }
                ],
                image: "üêü"
            },
            {
                id: 6,
                name: "Pizza Margherita Maison",
                category: "Pizza",
                time: 45,
                difficulty: "Moyen",
                price: 3.20,
                servings: 4,
                dietary: ["vegetarien"],
                excludedIngredients: ["viande", "poisson"],
                ingredients: [
                    { name: "P√¢te √† pizza", amount: "1", price: 1.20, category: "Boulangerie", common: false },
                    { name: "Sauce tomate", amount: "200g", price: 0.75, category: "√âpicerie", common: false },
                    { name: "Mozzarella", amount: "200g", price: 2.20, category: "Cr√©merie", common: false },
                    { name: "Basilic frais", amount: "1 bouquet", price: 0.80, category: "Fruits & L√©gumes", common: false },
                    { name: "Huile d'olive", amount: "1 c.√†.s", price: 0.10, category: "√âpicerie", common: true },
                    { name: "Origan", amount: "1 c.√†.c", price: 0.05, category: "√âpicerie", common: true }
                ],
                image: "üçï"
            },
            {
                id: 7,
                name: "Soupe de Lentilles",
                category: "Soupe",
                time: 40,
                difficulty: "Facile",
                price: 2.80,
                servings: 4,
                dietary: ["vegetarien", "vegan"],
                excludedIngredients: ["viande", "poisson", "produits laitiers", "oeufs"],
                ingredients: [
                    { name: "Lentilles", amount: "300g", price: 0.95, category: "√âpicerie", common: false },
                    { name: "Carottes", amount: "2", price: 0.40, category: "Fruits & L√©gumes", common: false },
                    { name: "C√©leri", amount: "2 branches", price: 0.50, category: "Fruits & L√©gumes", common: false },
                    { name: "Oignon", amount: "1", price: 0.25, category: "Fruits & L√©gumes", common: true },
                    { name: "Bouillon de l√©gumes", amount: "1L", price: 0.60, category: "√âpicerie", common: false },
                    { name: "Cumin", amount: "1 c.√†.c", price: 0.10, category: "√âpicerie", common: true }
                ],
                image: "üç≤"
            },
            {
                id: 8,
                name: "Tacos au Boeuf",
                category: "Mexicain",
                time: 25,
                difficulty: "Facile",
                price: 5.20,
                servings: 4,
                dietary: ["omnivore"],
                excludedIngredients: [],
                ingredients: [
                    { name: "Tortillas", amount: "8", price: 1.80, category: "√âpicerie", common: false },
                    { name: "Boeuf hach√©", amount: "400g", price: 4.80, category: "Boucherie", common: false },
                    { name: "Salade", amount: "1", price: 0.90, category: "Fruits & L√©gumes", common: false },
                    { name: "Tomates", amount: "2", price: 0.60, category: "Fruits & L√©gumes", common: false },
                    { name: "Fromage r√¢p√©", amount: "100g", price: 1.20, category: "Cr√©merie", common: false },
                    { name: "√âpices mexicaines", amount: "2 c.√†.s", price: 0.30, category: "√âpicerie", common: true }
                ],
                image: "üåÆ"
            }
        ];

        const DIETARY_OPTIONS = [
            { id: "omnivore", name: "Omnivore", description: "Je mange de tout" },
            { id: "vegetarien", name: "V√©g√©tarien", description: "Pas de viande ni poisson" },
            { id: "vegan", name: "Vegan", description: "Aucun produit animal" },
            { id: "pescetarien", name: "Pesc√©tarien", description: "Poisson mais pas de viande" }
        ];

        const COMMON_ALLERGENS = [
            "gluten", "produits laitiers", "oeufs", "poisson", "crustac√©s",
            "arachides", "fruits √† coque", "soja", "c√©leri", "moutarde"
        ];

        const STORES = ["Delhaize", "Colruyt", "Carrefour", "Aldi", "Lidl"];

        function FresheurApp() {
            const [currentStep, setCurrentStep] = useState('welcome');
            const [userProfile, setUserProfile] = useState({
                name: '',
                household: 2,
                dietary: 'omnivore',
                excludedIngredients: [],
                weeklyBudget: 50,
                preferredStore: 'Delhaize'
            });
            const [selectedRecipes, setSelectedRecipes] = useState([]);
            const [shoppingList, setShoppingList] = useState([]);
            const [commonIngredients, setCommonIngredients] = useState([]);

            useEffect(() => {
                const saved = localStorage.getItem('fresheur_profile');
                if (saved) {
                    const profile = JSON.parse(saved);
                    setUserProfile(profile);
                    if (profile.name) {
                        setCurrentStep('recipes');
                    }
                }
            }, []);

            const saveProfile = (profile) => {
                localStorage.setItem('fresheur_profile', JSON.stringify(profile));
                setUserProfile(profile);
            };

            const filteredRecipes = RECIPES_DATABASE.filter(recipe => {
                const matchesDietary = recipe.dietary.includes(userProfile.dietary);
                const hasExcluded = recipe.excludedIngredients.some(ing => 
                    userProfile.excludedIngredients.includes(ing)
                );
                return matchesDietary && !hasExcluded;
            });

            const toggleRecipe = (recipe) => {
                if (selectedRecipes.find(r => r.id === recipe.id)) {
                    setSelectedRecipes(selectedRecipes.filter(r => r.id !== recipe.id));
                } else {
                    setSelectedRecipes([...selectedRecipes, recipe]);
                }
            };

            const generateShoppingList = () => {
                const ingredientsMap = new Map();
                const commonItems = [];

                selectedRecipes.forEach(recipe => {
                    recipe.ingredients.forEach(ingredient => {
                        if (ingredient.common) {
                            if (!commonItems.find(i => i.name === ingredient.name)) {
                                commonItems.push(ingredient);
                            }
                        } else {
                            if (ingredientsMap.has(ingredient.name)) {
                                const existing = ingredientsMap.get(ingredient.name);
                                existing.recipes.push(recipe.name);
                            } else {
                                ingredientsMap.set(ingredient.name, {
                                    ...ingredient,
                                    recipes: [recipe.name],
                                    checked: false
                                });
                            }
                        }
                    });
                });

                setShoppingList(Array.from(ingredientsMap.values()));
                setCommonIngredients(commonItems);
                setCurrentStep('shopping');
            };

            const totalCost = shoppingList.reduce((sum, item) => sum + item.price, 0);
            const totalRecipeCost = selectedRecipes.reduce((sum, recipe) => sum + recipe.price, 0);

            if (currentStep === 'welcome') {
                return <WelcomeScreen onStart={() => setCurrentStep('profile')} />;
            }

            if (currentStep === 'profile') {
                return <ProfileSetup 
                    userProfile={userProfile}
                    onSave={(profile) => {
                        saveProfile(profile);
                        setCurrentStep('recipes');
                    }}
                />;
            }

            if (currentStep === 'recipes') {
                return (
                    <div className="min-h-screen bg-gray-50">
                        <Header userProfile={userProfile} onProfile={() => setCurrentStep('profile')} />
                        <RecipeSelection 
                            recipes={filteredRecipes}
                            selectedRecipes={selectedRecipes}
                            onToggle={toggleRecipe}
                            userProfile={userProfile}
                        />
                        {selectedRecipes.length > 0 && (
                            <div className="fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4 border-t">
                                <div className="max-w-7xl mx-auto flex items-center justify-between">
                                    <div>
                                        <p className="text-lg font-semibold">{selectedRecipes.length} recette(s) s√©lectionn√©e(s)</p>
                                        <p className="text-sm text-gray-600">Budget estim√©: ~{totalRecipeCost.toFixed(2)}‚Ç¨</p>
                                    </div>
                                    <button
                                        onClick={generateShoppingList}
                                        className="fresh-gradient text-white px-8 py-3 rounded-full font-semibold hover:opacity-90 transition"
                                    >
                                        Cr√©er ma liste de courses ‚Üí
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            if (currentStep === 'shopping') {
                return (
                    <ShoppingList 
                        shoppingList={shoppingList}
                        commonIngredients={commonIngredients}
                        totalCost={totalCost}
                        userProfile={userProfile}
                        onBack={() => setCurrentStep('recipes')}
                        onUpdate={setShoppingList}
                        onUpdateCommon={setCommonIngredients}
                    />
                );
            }
        }

        function WelcomeScreen({ onStart }) {
            return (
                <div className="min-h-screen fresh-gradient flex items-center justify-center p-4">
                    <div className="text-center animate-fade-in">
                        <div className="mb-6 flex justify-center">
                            <img src="data:image/webp;base64,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" alt="Fresheur Logo" className="w-64 h-64 object-contain drop-shadow-2xl" />
                        </div>
                        <h1 className="text-5xl font-bold text-white mb-4">Fresheur.be</h1>
                        <p className="text-xl text-white opacity-90 mb-8 max-w-md mx-auto">
                            Recettes personnalis√©es + Liste de courses intelligente + Budget ma√Ætris√©
                        </p>
                        <button
                            onClick={onStart}
                            className="bg-white text-green-600 px-8 py-4 rounded-full font-semibold text-lg hover:bg-gray-50 transition shadow-lg"
                        >
                            Commencer ‚Üí
                        </button>
                        <p className="text-white opacity-75 mt-6 text-sm">
                            üáßüá™ Pens√© pour les supermarch√©s belges
                        </p>
                    </div>
                </div>
            );
        }

        function ProfileSetup({ userProfile, onSave }) {
            const [profile, setProfile] = useState(userProfile);

            const toggleExcluded = (ingredient) => {
                if (profile.excludedIngredients.includes(ingredient)) {
                    setProfile({
                        ...profile,
                        excludedIngredients: profile.excludedIngredients.filter(i => i !== ingredient)
                    });
                } else {
                    setProfile({
                        ...profile,
                        excludedIngredients: [...profile.excludedIngredients, ingredient]
                    });
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(profile);
            };

            return (
                <div className="min-h-screen bg-gray-50 py-8 px-4">
                    <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-8 animate-fade-in">
                        <div className="text-center mb-8">
                            <h2 className="text-3xl font-bold text-gray-800 mb-2">Cr√©ez votre profil</h2>
                            <p className="text-gray-600">Pour des recettes sur-mesure</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    Votre pr√©nom
                                </label>
                                <input
                                    type="text"
                                    value={profile.name}
                                    onChange={(e) => setProfile({...profile, name: e.target.value})}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                    placeholder="Ex: Marie"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    Nombre de personnes dans votre foyer
                                </label>
                                <select
                                    value={profile.household}
                                    onChange={(e) => setProfile({...profile, household: parseInt(e.target.value)})}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                >
                                    {[1,2,3,4,5,6].map(n => (
                                        <option key={n} value={n}>{n} personne{n>1?'s':''}</option>
                                    ))}
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-3">
                                    R√©gime alimentaire
                                </label>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    {DIETARY_OPTIONS.map(option => (
                                        <label 
                                            key={option.id}
                                            className={`border-2 rounded-lg p-4 cursor-pointer transition ${
                                                profile.dietary === option.id 
                                                    ? 'border-green-500 bg-green-50' 
                                                    : 'border-gray-200 hover:border-gray-300'
                                            }`}
                                        >
                                            <input
                                                type="radio"
                                                name="dietary"
                                                value={option.id}
                                                checked={profile.dietary === option.id}
                                                onChange={(e) => setProfile({...profile, dietary: e.target.value})}
                                                className="hidden"
                                            />
                                            <div className="font-semibold text-gray-800">{option.name}</div>
                                            <div className="text-sm text-gray-600">{option.description}</div>
                                        </label>
                                    ))}
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-3">
                                    Ingr√©dients √† exclure (allergies, intol√©rances)
                                </label>
                                <div className="flex flex-wrap gap-2">
                                    {COMMON_ALLERGENS.map(allergen => (
                                        <button
                                            key={allergen}
                                            type="button"
                                            onClick={() => toggleExcluded(allergen)}
                                            className={`px-4 py-2 rounded-full text-sm font-medium transition ${
                                                profile.excludedIngredients.includes(allergen)
                                                    ? 'bg-red-500 text-white'
                                                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                            }`}
                                        >
                                            {allergen}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    Budget courses hebdomadaire: {profile.weeklyBudget}‚Ç¨
                                </label>
                                <input
                                    type="range"
                                    min="20"
                                    max="200"
                                    step="10"
                                    value={profile.weeklyBudget}
                                    onChange={(e) => setProfile({...profile, weeklyBudget: parseInt(e.target.value)})}
                                    className="w-full"
                                />
                                <div className="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>20‚Ç¨</span>
                                    <span>200‚Ç¨</span>
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    Magasin pr√©f√©r√©
                                </label>
                                <select
                                    value={profile.preferredStore}
                                    onChange={(e) => setProfile({...profile, preferredStore: e.target.value})}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                >
                                    {STORES.map(store => (
                                        <option key={store} value={store}>{store}</option>
                                    ))}
                                </select>
                            </div>

                            <button
                                type="submit"
                                className="w-full fresh-gradient text-white py-4 rounded-lg font-semibold text-lg hover:opacity-90 transition shadow-lg"
                            >
                                Sauvegarder mon profil
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        function Header({ userProfile, onProfile }) {
            return (
                <header className="bg-white shadow-sm sticky top-0 z-50">
                    <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                        <div className="flex items-center space-x-3">
                            <img src="Logo1.PNG" alt="Fresheur" className="w-10 h-10 object-contain" />
                            <h1 className="text-2xl font-bold text-gray-800">Fresheur.be</h1>
                        </div>
                        <div className="flex items-center space-x-4">
                            <div className="text-right hidden md:block">
                                <p className="text-sm text-gray-600">Bonjour, {userProfile.name}!</p>
                                <p className="text-xs text-gray-500">Budget: {userProfile.weeklyBudget}‚Ç¨/sem</p>
                            </div>
                            <button
                                onClick={onProfile}
                                className="px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm font-medium"
                            >
                                ‚öôÔ∏è Profil
                            </button>
                        </div>
                    </div>
                </header>
            );
        }

        function RecipeSelection({ recipes, selectedRecipes, onToggle, userProfile }) {
            const [filter, setFilter] = useState('all');

            const categories = ['all', ...new Set(recipes.map(r => r.category))];
            
            const filteredByCategory = filter === 'all' 
                ? recipes 
                : recipes.filter(r => r.category === filter);

            return (
                <div className="max-w-7xl mx-auto px-4 py-8 pb-32">
                    <div className="mb-8">
                        <h2 className="text-3xl font-bold text-gray-800 mb-2">Choisissez vos recettes</h2>
                        <p className="text-gray-600">S√©lectionnez les plats qui vous font envie cette semaine</p>
                    </div>

                    <div className="flex flex-wrap gap-2 mb-8">
                        {categories.map(cat => (
                            <button
                                key={cat}
                                onClick={() => setFilter(cat)}
                                className={`px-4 py-2 rounded-full text-sm font-medium transition ${
                                    filter === cat
                                        ? 'fresh-gradient text-white'
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                {cat === 'all' ? 'Toutes' : cat}
                            </button>
                        ))}
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filteredByCategory.map(recipe => {
                            const isSelected = selectedRecipes.find(r => r.id === recipe.id);
                            return (
                                <div
                                    key={recipe.id}
                                    onClick={() => onToggle(recipe)}
                                    className={`recipe-card bg-white rounded-xl shadow-md p-6 card-hover ${isSelected ? 'selected' : ''}`}
                                >
                                    <div className="text-5xl mb-3">{recipe.image}</div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-2">{recipe.name}</h3>
                                    <div className="flex flex-wrap gap-2 mb-3">
                                        <span className="badge bg-blue-100 text-blue-800">‚è±Ô∏è {recipe.time} min</span>
                                        <span className="badge bg-purple-100 text-purple-800">üë®‚Äçüç≥ {recipe.difficulty}</span>
                                        <span className="badge bg-green-100 text-green-800">üí∞ {recipe.price.toFixed(2)}‚Ç¨</span>
                                    </div>
                                    <p className="text-sm text-gray-600 mb-2">
                                        {recipe.servings} personnes ‚Ä¢ {recipe.ingredients.length} ingr√©dients
                                    </p>
                                    {isSelected && (
                                        <div className="mt-3 text-green-600 font-semibold flex items-center">
                                            ‚úì Ajout√©e √† votre menu
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>

                    {filteredByCategory.length === 0 && (
                        <div className="text-center py-12">
                            <p className="text-gray-500 text-lg">Aucune recette ne correspond √† vos crit√®res</p>
                            <p className="text-gray-400 text-sm mt-2">Essayez de modifier vos filtres ou votre profil</p>
                        </div>
                    )}
                </div>
            );
        }

        function ShoppingList({ shoppingList, commonIngredients, totalCost, userProfile, onBack, onUpdate, onUpdateCommon }) {
            const toggleItem = (itemName) => {
                onUpdate(shoppingList.map(item => 
                    item.name === itemName ? {...item, checked: !item.checked} : item
                ));
            };

            const toggleCommonItem = (itemName) => {
                onUpdateCommon(commonIngredients.map(item => 
                    item.name === itemName ? {...item, checked: !item.checked} : item
                ));
            };

            const removeCommonItem = (itemName) => {
                onUpdateCommon(commonIngredients.filter(item => item.name !== itemName));
            };

            const groupedByCategory = shoppingList.reduce((acc, item) => {
                if (!acc[item.category]) acc[item.category] = [];
                acc[item.category].push(item);
                return acc;
            }, {});

            const checkedCommonTotal = commonIngredients
                .filter(item => item.checked)
                .reduce((sum, item) => sum + item.price, 0);

            const finalTotal = totalCost + checkedCommonTotal;

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
                            <button
                                onClick={onBack}
                                className="px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm font-medium"
                            >
                                ‚Üê Retour aux recettes
                            </button>
                            <div className="text-right">
                                <p className="font-bold text-lg text-gray-800">{finalTotal.toFixed(2)}‚Ç¨</p>
                                <p className="text-xs text-gray-500">Total estim√©</p>
                            </div>
                        </div>
                    </header>

                    <div className="max-w-4xl mx-auto px-4 py-8">
                        <div className="mb-8">
                            <h2 className="text-3xl font-bold text-gray-800 mb-2">Votre liste de courses</h2>
                            <p className="text-gray-600">Bas√©e sur vos recettes ‚Ä¢ {userProfile.preferredStore}</p>
                        </div>

                        {commonIngredients.length > 0 && (
                            <div className="bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6">
                                <h3 className="font-bold text-lg text-gray-800 mb-3">
                                    üí° Vous avez peut-√™tre d√©j√† ces ingr√©dients
                                </h3>
                                <p className="text-sm text-gray-600 mb-4">
                                    Cochez ceux que vous poss√©dez d√©j√† pour les ajouter au co√ªt total
                                </p>
                                <div className="space-y-2">
                                    {commonIngredients.map(item => (
                                        <div key={item.name} className="flex items-center justify-between bg-white rounded-lg p-3">
                                            <label className="flex items-center space-x-3 cursor-pointer flex-1">
                                                <input
                                                    type="checkbox"
                                                    checked={item.checked || false}
                                                    onChange={() => toggleCommonItem(item.name)}
                                                    className="w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500"
                                                />
                                                <div className="flex-1">
                                                    <span className="text-gray-800 font-medium">{item.name}</span>
                                                    <span className="text-gray-500 text-sm ml-2">({item.amount})</span>
                                                </div>
                                            </label>
                                            <div className="flex items-center space-x-3">
                                                <span className="text-gray-600 font-semibold">{item.price.toFixed(2)}‚Ç¨</span>
                                                <button
                                                    onClick={() => removeCommonItem(item.name)}
                                                    className="text-red-500 hover:text-red-700 text-sm"
                                                >
                                                    ‚úï
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                {checkedCommonTotal > 0 && (
                                    <p className="text-sm text-yellow-700 mt-3 font-semibold">
                                        +{checkedCommonTotal.toFixed(2)}‚Ç¨ ajout√©s au total
                                    </p>
                                )}
                            </div>
                        )}

                        {Object.entries(groupedByCategory).map(([category, items]) => (
                            <div key={category} className="bg-white rounded-xl shadow-md p-6 mb-4">
                                <h3 className="font-bold text-lg text-gray-800 mb-4 border-b pb-2">
                                    {category}
                                </h3>
                                <div className="space-y-3">
                                    {items.map(item => (
                                        <div 
                                            key={item.name}
                                            className={`flex items-center justify-between p-3 rounded-lg transition ${
                                                item.checked ? 'bg-gray-50 opacity-60' : 'hover:bg-gray-50'
                                            }`}
                                        >
                                            <label className="flex items-center space-x-3 cursor-pointer flex-1">
                                                <input
                                                    type="checkbox"
                                                    checked={item.checked}
                                                    onChange={() => toggleItem(item.name)}
                                                    className="w-5 h-5 text-green-600 rounded focus:ring-green-500"
                                                />
                                                <div className="flex-1">
                                                    <div className={`font-medium ${item.checked ? 'line-through text-gray-500' : 'text-gray-800'}`}>
                                                        {item.name}
                                                    </div>
                                                    <div className="text-sm text-gray-500">
                                                        {item.amount} ‚Ä¢ Pour: {item.recipes.join(', ')}
                                                    </div>
                                                </div>
                                            </label>
                                            <span className={`font-semibold ${item.checked ? 'text-gray-400' : 'text-gray-700'}`}>
                                                {item.price.toFixed(2)}‚Ç¨
                                            </span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}

                        <div className="bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 shadow-lg">
                            <div className="flex justify-between items-center mb-4">
                                <div>
                                    <p className="text-sm opacity-90">Total estim√©</p>
                                    <p className="text-3xl font-bold">{finalTotal.toFixed(2)}‚Ç¨</p>
                                </div>
                                <div className="text-right">
                                    <p className="text-sm opacity-90">Budget restant</p>
                                    <p className="text-2xl font-bold">
                                        {(userProfile.weeklyBudget - finalTotal).toFixed(2)}‚Ç¨
                                    </p>
                                </div>
                            </div>
                            <button className="w-full bg-white text-green-600 py-3 rounded-lg font-semibold hover:bg-gray-50 transition">
                                üöö Commander chez {userProfile.preferredStore}
                            </button>
                            <p className="text-center text-xs opacity-75 mt-3">
                                Fonctionnalit√© de livraison P2P bient√¥t disponible
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<FresheurApp />, document.getElementById('root'));
    </script>
</body>
</html>